!function(){function t(t,i,e){this.image=new Image,this.frameWidth=i,this.frameHeight=e;var s=this;this.image.onload=function(){s.framesPerRow=Math.floor(s.image.width/s.frameWidth)},this.image.src=t}function e(t,i,e,s){for(var n=[],a=0,r=0,h=e;s>=h;h++)n.push(h);this.update=function(){r==i-1&&(a=(a+1)%n.length),r=(r+1)%i},this.draw=function(i,e){var s=Math.floor(n[a]/t.framesPerRow),r=Math.floor(n[a]%t.framesPerRow);o.drawImage(t.image,r*t.frameWidth,s*t.frameHeight,t.frameWidth,t.frameHeight,i,e,t.frameWidth,t.frameHeight)}}function s(){for(u(s),f.draw(),i=0;i<h.length;i++)h[i].x-=r.speed,o.drawImage(d.imgs.grass,h[i].x,h[i].y);h[0].x<=-m&&(h.shift(),h.push({x:h[h.length-1].x+m,y:g})),r.anim.update(),r.anim.draw(164,375)}function n(){for(r.width=80,r.height=80,r.speed=4,r.sheet=new t("../assets/images/redneck-run.png",r.width,r.height),r.anim=new e(r.sheet,5,0,3),i=0,length=Math.floor(a.width/m)+2;i<length;i++)h[i]={x:i*m,y:g};f.reset(),s()}var a=document.getElementById("canvas"),o=a.getContext("2d"),r={},h=[],m=110,g=a.height-43,d=function(){function t(t,e){"loading"===this[t][e].status&&(this[t][e].status="loaded",i++,i===this.totalAssest&&"function"==typeof this.finished&&this.finished())}this.imgs={bg:"../assets/images/bg.png",grass:"../assets/images/grass.png",avatar_normal:"../assets/images/redneck-run.png"};var i=0,e=Object.keys(this.imgs).length;return this.totalAssest=e,this.downloadAll=function(){var i,e=this;for(var s in this.imgs)this.imgs.hasOwnProperty(s)&&(i=this.imgs[s],function(e,s){e.imgs[s]=new Image,e.imgs[s].status="loading",e.imgs[s].name=s,e.imgs[s].onload=function(){t.call(e,"imgs",s)},e.imgs[s].src=i}(e,s))},{imgs:this.imgs,totalAssest:this.totalAssest,downloadAll:this.downloadAll}}();d.finished=function(){n()};var f=function(){return this.draw=function(){o.drawImage(d.imgs.bg,0,0)},this.reset=function(){},{draw:this.draw,reset:this.reset}}(),u=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();d.downloadAll()}();